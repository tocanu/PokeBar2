<Window x:Class="Pokebar.DesktopPet.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Pokebar — Settings"
        Width="520" Height="520"
        Style="{StaticResource FR_Window}"
        WindowStartupLocation="CenterScreen"
        MouseLeftButtonDown="OnWindowDrag">

    <!-- OUTER FRAME -->
    <Border Style="{StaticResource FR_OuterFrame}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- ═══ HEADER BAR ═══ -->
            <Border Grid.Row="0" Style="{StaticResource FR_HeaderBar}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="HeaderText" Text="SETTINGS"
                               Style="{StaticResource FR_Title}" FontSize="18"
                               VerticalAlignment="Center"/>
                    <!-- Live pet preview -->
                    <Border Grid.Column="1" Background="#40283848"
                            BorderBrush="{StaticResource FR_BorderDarkBrush}"
                            BorderThickness="2" Width="64" Height="64"
                            SnapsToDevicePixels="True">
                        <Image x:Name="PreviewImage" Stretch="Uniform"
                               RenderOptions.BitmapScalingMode="NearestNeighbor"/>
                    </Border>
                </Grid>
            </Border>

            <!-- ═══ SETTINGS TABS ═══ -->
            <Border Grid.Row="1" Style="{StaticResource FR_InnerPanel}" Margin="3">
                <TabControl Style="{StaticResource FR_TabControl}">

                    <!-- General -->
                    <TabItem x:Name="TabGeneral" Header="GENERAL" 
                             Style="{StaticResource FR_TabItem}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="6">
                            <StackPanel>
                                <TextBlock Text="Profile" Style="{StaticResource FR_Label}"
                                           x:Name="LblProfile" Margin="0,0,0,4"/>
                                <ComboBox x:Name="ProfileCombo" Margin="0,0,0,12"
                                          Style="{StaticResource FR_ComboBox}"
                                          SelectionChanged="OnProfileChanged"/>

                                <TextBlock Text="Language" Style="{StaticResource FR_Label}"
                                           x:Name="LblLanguage" Margin="0,0,0,4"/>
                                <ComboBox x:Name="LanguageCombo" Margin="0,0,0,12"
                                          Style="{StaticResource FR_ComboBox}"
                                          SelectionChanged="OnLanguageChanged">
                                    <ComboBoxItem Content="Português (Brasil)" Tag="pt-BR"/>
                                    <ComboBoxItem Content="English (US)" Tag="en-US"/>
                                </ComboBox>

                                <TextBlock Text="Walk Speed" Style="{StaticResource FR_Label}"
                                           x:Name="LblSpeed" Margin="0,0,0,4"/>
                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="50"/>
                                    </Grid.ColumnDefinitions>
                                    <Slider x:Name="SpeedSlider" Minimum="20" Maximum="150" 
                                            Value="50" Style="{StaticResource FR_Slider}"
                                            VerticalAlignment="Center"
                                            ValueChanged="OnSpeedChanged"/>
                                    <TextBlock x:Name="SpeedValue" Grid.Column="1" Text="50"
                                               Style="{StaticResource FR_Label}"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center"/>
                                </Grid>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>

                    <!-- Behavior -->
                    <TabItem x:Name="TabBehavior" Header="BEHAVIOR" 
                             Style="{StaticResource FR_TabItem}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="6">
                            <StackPanel>
                                <CheckBox x:Name="ChkSilenceNotifications" 
                                          Style="{StaticResource FR_CheckBox}"
                                          Content="Silence Notifications" Margin="0,0,0,6"
                                          Checked="OnSilenceNotificationsChanged" 
                                          Unchecked="OnSilenceNotificationsChanged"/>
                                <TextBlock Text="Silences capture, battle and achievement notifications."
                                           Style="{StaticResource FR_SmallText}"
                                           Margin="26,0,0,12" x:Name="SilenceDescription"/>

                                <CheckBox x:Name="ChkBlockSpawns" 
                                          Style="{StaticResource FR_CheckBox}"
                                          Content="Block Spawns" Margin="0,0,0,6"
                                          Checked="OnBlockSpawnsChanged" 
                                          Unchecked="OnBlockSpawnsChanged"/>
                                <TextBlock Text="Blocks enemy spawns and combat."
                                           Style="{StaticResource FR_SmallText}"
                                           Margin="26,0,0,12" x:Name="BlockSpawnsDescription"/>

                                <CheckBox x:Name="ChkMinimal" 
                                          Style="{StaticResource FR_CheckBox}"
                                          Content="Minimal Mode" Margin="0,0,0,6"
                                          Checked="OnMinimalChanged" 
                                          Unchecked="OnMinimalChanged"/>
                                <TextBlock Text="Reduces movement and visual effects."
                                           Style="{StaticResource FR_SmallText}"
                                           Margin="26,0,0,12" x:Name="MinimalDescription"/>

                                <CheckBox x:Name="ChkToast" 
                                          Style="{StaticResource FR_CheckBox}"
                                          Content="Toast Notifications" Margin="0,0,0,6"
                                          Checked="OnToastChanged" 
                                          Unchecked="OnToastChanged"/>

                                <CheckBox x:Name="ChkTray" 
                                          Style="{StaticResource FR_CheckBox}"
                                          Content="Tray Icon" Margin="0,0,0,6"
                                          Checked="OnTrayChanged" 
                                          Unchecked="OnTrayChanged"/>

                                <CheckBox x:Name="ChkDebug" 
                                          Style="{StaticResource FR_CheckBox}"
                                          Content="Debug Overlay" Margin="0,0,0,6"
                                          Checked="OnDebugChanged" 
                                          Unchecked="OnDebugChanged"/>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>

                    <!-- Stats -->
                    <TabItem x:Name="TabStats" Header="STATS" 
                             Style="{StaticResource FR_TabItem}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="6">
                            <StackPanel x:Name="StatsPanel"/>
                        </ScrollViewer>
                    </TabItem>

                    <!-- Achievements -->
                    <TabItem x:Name="TabAchievements" Header="BADGES" 
                             Style="{StaticResource FR_TabItem}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="6">
                            <ItemsControl x:Name="AchievementsList">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{Binding Background}" 
                                                BorderBrush="{StaticResource FR_CardBorderBrush}"
                                                BorderThickness="1"
                                                Padding="8" Margin="0,0,0,4"
                                                SnapsToDevicePixels="True">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="30"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Text="{Binding Icon}" FontSize="18"
                                                           VerticalAlignment="Center"/>
                                                <StackPanel Grid.Column="1">
                                                    <TextBlock Text="{Binding Title}" 
                                                               Style="{StaticResource FR_Label}"/>
                                                    <TextBlock Text="{Binding Description}" 
                                                               Style="{StaticResource FR_SmallText}"/>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </TabItem>
                </TabControl>
            </Border>

            <!-- ═══ FOOTER ═══ -->
            <Border Grid.Row="2" Style="{StaticResource FR_InnerPanel}"
                    Margin="3,0,3,3" Padding="8,6">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Button x:Name="SaveButton" Grid.Column="1"
                            Content="SAVE" Style="{StaticResource FR_ButtonRed}"
                            Click="OnSaveClick" Margin="0,0,6,0"/>

                    <Button x:Name="CancelButton" Grid.Column="2"
                            Content="CANCEL" Style="{StaticResource FR_Button}"
                            Click="OnCancelClick"/>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
